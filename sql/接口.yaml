openapi: 3.0.3
info:
  title: 复盘系统
  description: 复盘系统用于管理每日、公司、行业和产业级别的复盘记录，并支持评论功能。
  version: 1.1.0
servers:
  - url: http://localhost:8080
    description: 本地开发服务器
paths:
  /api/daily-records:
    post:
      summary: 创建或更新每日记录
      description: |
        用于创建新的每日记录，如果 `current_day` 已存在，则更新该记录的 `content`。
        info字段由后端自动处理兼容性。
      tags:
        - DailyRecord
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentDay:
                  type: string
                  format: date
                  example: "2025-11-06"
                content:
                  type: string
                  example: "今日市场整体表现平稳，无重大波动事件。"
              required:
                - currentDay
                - content
            example:
              currentDay: "2025-11-06"
              content: "今日市场整体表现平稳，无重大波动事件。"
      responses:
        '200':
          description: 操作成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误或格式不正确。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: 分页查询每日记录
      description: 根据可选的日期范围和内容关键字查询每日记录列表，并支持分页，包含评论信息。
      tags:
        - DailyRecord
      parameters:
        - name: startDate
          in: query
          description: "查询的开始日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-01"
        - name: endDate
          in: query
          description: "查询的结束日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-06"
        - name: content
          in: query
          description: 用于模糊搜索内容的关键字
          required: false
          schema:
            type: string
            example: "市场"
        - name: pageNum
          in: query
          description: 页码 (从1开始)
          required: true
          schema:
            type: integer
            default: 1
            example: 1
        - name: pageSize
          in: query
          description: 每页大小
          required: true
          schema:
            type: integer
            default: 10
            example: 10
      responses:
        '200':
          description: 查询成功，返回分页结果。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResultDailyRecord'
              example:
                records:
                  - id: 1
                    currentDay: "2025-11-06"
                    content: "今日市场整体表现平稳，无重大波动事件。"
                    info: "兼容处理"
                    comments:
                      - id: 1
                        dailyRecordId: 1
                        currentDay: "2025-11-06"
                        content: "这条记录很准确"
                        createTime: "2025-11-06T10:30:00"
                        updateTime: "2025-11-06T10:30:00"
                        info: "兼容处理"
                total: 1
                pageNum: 1
                pageSize: 10
                pages: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/daily-records/{recordId}/comments:
    post:
      summary: 添加每日记录评论
      description: 为指定的每日记录添加评论。
      tags:
        - DailyRecord
      parameters:
        - name: recordId
          in: path
          required: true
          description: 每日记录ID
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DailyCommentDTO'
            example:
              currentDay: "2025-11-06"
              content: "这条记录很准确"
      responses:
        '200':
          description: 评论添加成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/company-records:
    post:
      summary: 创建或更新公司记录
      description: |
        用于创建新的公司记录，如果 `company` 和 `current_day` 联合唯一索引已存在，则更新该记录的 `content` 和 `info`。
        info字段由后端自动处理兼容性。
      tags:
        - CompanyRecord
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentDay:
                  type: string
                  format: date
                  example: "2025-11-06"
                company:
                  type: string
                  example: "AAPL"
                content:
                  type: string
                  example: "苹果公司今日股价上涨 2.5%。"
              required:
                - currentDay
                - company
                - content
            example:
              currentDay: "2025-11-06"
              company: "AAPL"
              content: "苹果公司今日股价上涨 2.5%。"
      responses:
        '200':
          description: 操作成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误或格式不正确。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: 分页查询公司记录
      description: 根据可选的公司名称、日期范围和内容关键字查询公司记录列表，并支持分页，包含评论信息。
      tags:
        - CompanyRecord
      parameters:
        - name: company
          in: query
          description: 公司名称或标识
          required: true
          schema:
            type: string
            example: "AAPL"
        - name: startDate
          in: query
          description: "查询的开始日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-01"
        - name: endDate
          in: query
          description: "查询的结束日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-06"
        - name: content
          in: query
          description: 用于模糊搜索内容的关键字
          required: false
          schema:
            type: string
            example: "股价"
        - name: pageNum
          in: query
          description: 页码 (从1开始)
          required: true
          schema:
            type: integer
            default: 1
            example: 1
        - name: pageSize
          in: query
          description: 每页大小
          required: true
          schema:
            type: integer
            default: 10
            example: 10
      responses:
        '200':
          description: 查询成功，返回分页结果。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResultCompanyRecord'
              example:
                records:
                  - id: 1
                    currentDay: "2025-11-06"
                    company: "AAPL"
                    content: "苹果公司今日股价上涨 2.5%。"
                    info: "兼容处理"
                    comments:
                      - id: 1
                        companyRecordId: 1
                        company: "AAPL"
                        currentDay: "2025-11-06"
                        content: "分析很到位"
                        createTime: "2025-11-06T11:00:00"
                        updateTime: "2025-11-06T11:00:00"
                        info: "兼容处理"
                total: 1
                pageNum: 1
                pageSize: 10
                pages: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/company-records/{recordId}/comments:
    post:
      summary: 添加公司记录评论
      description: 为指定的公司记录添加评论。
      tags:
        - CompanyRecord
      parameters:
        - name: recordId
          in: path
          required: true
          description: 公司记录ID
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompanyCommentDTO'
            example:
              company: "AAPL"
              currentDay: "2025-11-06"
              content: "分析很到位"
      responses:
        '200':
          description: 评论添加成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/industry-records:
    post:
      summary: 创建或更新行业记录
      description: |
        用于创建新的行业记录，如果 `industry` 和 `current_day` 联合唯一索引已存在，则更新该记录的 `content` 和 `info`。
        info字段由后端自动处理兼容性。
      tags:
        - IndustryRecord
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentDay:
                  type: string
                  format: date
                  example: "2025-11-06"
                industry:
                  type: string
                  example: "科技"
                content:
                  type: string
                  example: "科技行业今日表现强劲。"
              required:
                - currentDay
                - industry
                - content
            example:
              currentDay: "2025-11-06"
              industry: "科技"
              content: "科技行业今日表现强劲。"
      responses:
        '200':
          description: 操作成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误或格式不正确。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: 分页查询行业记录
      description: 根据可选的行业名称、类型、日期范围和内容关键字查询行业记录列表，并支持分页，包含评论信息。
      tags:
        - IndustryRecord
      parameters:
        - name: industry
          in: query
          description: 行业名称
          required: false
          schema:
            type: string
            example: "科技"
        - name: type
          in: query
          description: 行业类型
          required: false
          schema:
            type: string
            example: "半导体"
        - name: startDate
          in: query
          description: "查询的开始日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-01"
        - name: endDate
          in: query
          description: "查询的结束日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-06"
        - name: content
          in: query
          description: 用于模糊搜索内容的关键字
          required: false
          schema:
            type: string
            example: "表现"
        - name: pageNum
          in: query
          description: 页码 (从1开始)
          required: true
          schema:
            type: integer
            default: 1
            example: 1
        - name: pageSize
          in: query
          description: 每页大小
          required: true
          schema:
            type: integer
            default: 10
            example: 10
      responses:
        '200':
          description: 查询成功，返回分页结果。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResultIndustryRecord'
              example:
                records:
                  - id: 1
                    currentDay: "2025-11-06"
                    industry: "科技"
                    type: "半导体"
                    content: "科技行业今日表现强劲。"
                    info: "兼容处理"
                    comments:
                      - id: 1
                        industryRecordId: 1
                        industry: "科技"
                        currentDay: "2025-11-06"
                        content: "分析专业"
                        createTime: "2025-11-06T14:00:00"
                        updateTime: "2025-11-06T14:00:00"
                        info: "兼容处理"
                total: 1
                pageNum: 1
                pageSize: 10
                pages: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/industry-records/{recordId}/comments:
    post:
      summary: 添加行业记录评论
      description: 为指定的行业记录添加评论。
      tags:
        - IndustryRecord
      parameters:
        - name: recordId
          in: path
          required: true
          description: 行业记录ID
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IndustryCommentDTO'
            example:
              industry: "科技"
              currentDay: "2025-11-06"
              content: "分析专业"
      responses:
        '200':
          description: 评论添加成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/product-records:
    post:
      summary: 创建或更新产业记录
      description: |
        用于创建新的产业记录，如果 `product` 和 `current_day` 联合唯一索引已存在，则更新该记录的 `content` 和 `info`。
        info字段由后端自动处理兼容性。
      tags:
        - ProductRecord
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                currentDay:
                  type: string
                  format: date
                  example: "2025-11-06"
                product:
                  type: string
                  example: "新能源"
                content:
                  type: string
                  example: "新能源产业今日发展迅速。"
              required:
                - currentDay
                - product
                - content
            example:
              currentDay: "2025-11-06"
              product: "新能源"
              content: "新能源产业今日发展迅速。"
      responses:
        '200':
          description: 操作成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误或格式不正确。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: 分页查询产业记录
      description: 根据可选的产业名称、日期范围和内容关键字查询产业记录列表，并支持分页，包含评论信息。
      tags:
        - ProductRecord
      parameters:
        - name: product
          in: query
          description: 产业名称
          required: false
          schema:
            type: string
            example: "新能源"
        - name: startDate
          in: query
          description: "查询的开始日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-01"
        - name: endDate
          in: query
          description: "查询的结束日期 (格式: YYYY-MM-DD)"
          required: false
          schema:
            type: string
            format: date
            example: "2025-11-06"
        - name: content
          in: query
          description: 用于模糊搜索内容的关键字
          required: false
          schema:
            type: string
            example: "发展"
        - name: pageNum
          in: query
          description: 页码 (从1开始)
          required: true
          schema:
            type: integer
            default: 1
            example: 1
        - name: pageSize
          in: query
          description: 每页大小
          required: true
          schema:
            type: integer
            default: 10
            example: 10
      responses:
        '200':
          description: 查询成功，返回分页结果。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResultProductRecord'
              example:
                records:
                  - id: 1
                    currentDay: "2025-11-06"
                    product: "新能源"
                    content: "新能源产业今日发展迅速。"
                    info: "兼容处理"
                    comments:
                      - id: 1
                        productRecordId: 1
                        product: "新能源"
                        currentDay: "2025-11-06"
                        content: "前景看好"
                        createTime: "2025-11-06T15:00:00"
                        updateTime: "2025-11-06T15:00:00"
                        info: "兼容处理"
                total: 1
                pageNum: 1
                pageSize: 10
                pages: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/product-records/{recordId}/comments:
    post:
      summary: 添加产业记录评论
      description: 为指定的产业记录添加评论。
      tags:
        - ProductRecord
      parameters:
        - name: recordId
          in: path
          required: true
          description: 产业记录ID
          schema:
            type: integer
            format: int64
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCommentDTO'
            example:
              product: "新能源"
              currentDay: "2025-11-06"
              content: "前景看好"
      responses:
        '200':
          description: 评论添加成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
  /api/attentions:
    post:
      summary: 创建或更新关注记录
      description: |
        用于创建新的关注记录，如果name已存在，则更新该记录的times字段。
        type字段必须是"company"、"industry"或"product"之一。
      tags:
        - Attention
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttentionDTO'
            example:
              name: "AAPL"
              type: "company"
      responses:
        '200':
          description: 操作成功，返回影响的行数。
          content:
            text/plain:
              schema:
                type: integer
                example: 1
        '400':
          description: 请求参数错误或格式不正确。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    get:
      summary: 分页查询关注记录
      description: 根据类型分页查询关注记录列表。
      tags:
        - Attention
      parameters:
        - name: type
          in: query
          description: 类型 (company, industry, product)
          required: true
          schema:
            type: string
            enum: ["company", "industry", "product"]
            example: "company"
        - name: pageNum
          in: query
          description: 页码 (从1开始)
          required: true
          schema:
            type: integer
            default: 1
            example: 1
        - name: pageSize
          in: query
          description: 每页大小
          required: true
          schema:
            type: integer
            default: 10
            example: 10
      responses:
        '200':
          description: 查询成功，返回分页结果。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageResultAttention'
              example:
                records:
                  - id: 1
                    name: "AAPL"
                    type: "company"
                    createTime: "2025-11-06T10:00:00"
                    updateTime: "2025-11-06T10:30:00"
                    times: 5
                  - id: 2
                    name: "GOOGL"
                    type: "company"
                    createTime: "2025-11-06T09:15:00"
                    updateTime: "2025-11-06T09:45:00"
                    times: 3
                total: 2
                pageNum: 1
                pageSize: 10
                pages: 1
        '400':
          description: 请求参数错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: 服务器内部错误。
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

components:
  schemas:
    AttentionDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 记录的唯一ID (由数据库自动生成)
          example: 1
        name:
          type: string
          description: 名称
          example: "AAPL"
        type:
          type: string
          description: 类型 (company, industry, product)
          enum: [ "company", "industry", "product" ]
          example: "company"
        createTime:
          type: string
          format: date-time
          description: 创建时间
          example: "2025-11-06T10:00:00"
        updateTime:
          type: string
          format: date-time
          description: 更新时间
          example: "2025-11-06T10:30:00"
        times:
          type: integer
          description: 关注次数
          example: 5
      required:
        - name
        - type

    PageResultAttention:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/AttentionDTO'
        total:
          type: integer
          format: int64
          description: 总记录数
          example: 2
        pageNum:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10
        pages:
          type: integer
          description: 总页数
          example: 1
    DailyRecordWithCommentsDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 记录的唯一ID (由数据库自动生成)
          example: 1
        currentDay:
          type: string
          format: date
          description: "记录的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        content:
          type: string
          description: 记录的主要内容
          example: "今日市场整体表现平稳，无重大波动事件。"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
        comments:
          type: array
          items:
            $ref: '#/components/schemas/DailyCommentDTO'
          description: 该记录的所有评论
      required:
        - currentDay
        - content

    DailyCommentDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 评论的唯一ID
          example: 1
        dailyRecordId:
          type: integer
          format: int64
          description: 关联的每日记录ID
          example: 1
        currentDay:
          type: string
          format: date
          description: "评论的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        content:
          type: string
          description: 评论内容
          example: "这条记录很准确"
        createTime:
          type: string
          format: date-time
          description: 创建时间
          example: "2025-11-06T10:30:00"
        updateTime:
          type: string
          format: date-time
          description: 更新时间
          example: "2025-11-06T10:30:00"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
      required:
        - currentDay
        - content

    CompanyRecordWithCommentsDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 记录的唯一ID (由数据库自动生成)
          example: 1
        currentDay:
          type: string
          format: date
          description: "记录的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        company:
          type: string
          description: 公司名称或标识
          example: "AAPL"
        content:
          type: string
          description: 记录的主要内容
          example: "苹果公司今日股价上涨 2.5%。"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
        comments:
          type: array
          items:
            $ref: '#/components/schemas/CompanyCommentDTO'
          description: 该记录的所有评论
      required:
        - currentDay
        - company
        - content

    CompanyCommentDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 评论的唯一ID
          example: 1
        companyRecordId:
          type: integer
          format: int64
          description: 关联的公司记录ID
          example: 1
        company:
          type: string
          description: 公司名称或标识
          example: "AAPL"
        currentDay:
          type: string
          format: date
          description: "评论的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        content:
          type: string
          description: 评论内容
          example: "分析很到位"
        createTime:
          type: string
          format: date-time
          description: 创建时间
          example: "2025-11-06T11:00:00"
        updateTime:
          type: string
          format: date-time
          description: 更新时间
          example: "2025-11-06T11:00:00"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
      required:
        - company
        - currentDay
        - content

    IndustryRecordDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 记录的唯一ID (由数据库自动生成)
          example: 1
        currentDay:
          type: string
          format: date
          description: "记录的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        industry:
          type: string
          description: 行业名称
          example: "科技"
        type:
          type: string
          description: 行业类型
          example: "半导体"
        content:
          type: string
          description: 记录的主要内容
          example: "科技行业今日表现强劲。"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
        comments:
          type: array
          items:
            $ref: '#/components/schemas/IndustryCommentDTO'
          description: 该记录的所有评论
      required:
        - currentDay
        - industry
        - content

    IndustryCommentDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 评论的唯一ID
          example: 1
        industryRecordId:
          type: integer
          format: int64
          description: 关联的行业记录ID
          example: 1
        industry:
          type: string
          description: 行业名称
          example: "科技"
        currentDay:
          type: string
          format: date
          description: "评论的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        content:
          type: string
          description: 评论内容
          example: "分析专业"
        createTime:
          type: string
          format: date-time
          description: 创建时间
          example: "2025-11-06T14:00:00"
        updateTime:
          type: string
          format: date-time
          description: 更新时间
          example: "2025-11-06T14:00:00"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
      required:
        - industry
        - currentDay
        - content

    ProductRecordDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 记录的唯一ID (由数据库自动生成)
          example: 1
        currentDay:
          type: string
          format: date
          description: "记录的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        product:
          type: string
          description: 产业名称
          example: "新能源"
        content:
          type: string
          description: 记录的主要内容
          example: "新能源产业今日发展迅速。"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
        comments:
          type: array
          items:
            $ref: '#/components/schemas/ProductCommentDTO'
          description: 该记录的所有评论
      required:
        - currentDay
        - product
        - content

    ProductCommentDTO:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 评论的唯一ID
          example: 1
        productRecordId:
          type: integer
          format: int64
          description: 关联的产业记录ID
          example: 1
        product:
          type: string
          description: 产业名称
          example: "新能源"
        currentDay:
          type: string
          format: date
          description: "评论的日期 (格式: YYYY-MM-DD)"
          example: "2025-11-06"
        content:
          type: string
          description: 评论内容
          example: "前景看好"
        createTime:
          type: string
          format: date-time
          description: 创建时间
          example: "2025-11-06T15:00:00"
        updateTime:
          type: string
          format: date-time
          description: 更新时间
          example: "2025-11-06T15:00:00"
        info:
          type: string
          description: 附加信息
          example: "兼容处理"
      required:
        - product
        - currentDay
        - content

    PageResultDailyRecord:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/DailyRecordWithCommentsDTO'
        total:
          type: integer
          format: int64
          description: 总记录数
          example: 1
        pageNum:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10
        pages:
          type: integer
          description: 总页数
          example: 1

    PageResultCompanyRecord:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/CompanyRecordWithCommentsDTO'
        total:
          type: integer
          format: int64
          description: 总记录数
          example: 1
        pageNum:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10
        pages:
          type: integer
          description: 总页数
          example: 1

    PageResultIndustryRecord:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/IndustryRecordDTO'
        total:
          type: integer
          format: int64
          description: 总记录数
          example: 1
        pageNum:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10
        pages:
          type: integer
          description: 总页数
          example: 1

    PageResultProductRecord:
      type: object
      properties:
        records:
          type: array
          items:
            $ref: '#/components/schemas/ProductRecordDTO'
        total:
          type: integer
          format: int64
          description: 总记录数
          example: 1
        pageNum:
          type: integer
          description: 当前页码
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          example: 10
        pages:
          type: integer
          description: 总页数
          example: 1

    ErrorResponse:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          description: 错误发生的时间戳
        status:
          type: integer
          description: HTTP 状态码
        error:
          type: string
          description: 错误类型
        message:
          type: string
          description: 错误信息
        path:
          type: string
          description: 请求路径
      example:
        timestamp: "2025-11-06T10:00:00.000+00:00"
        status: 400
        error: "Bad Request"
        message: "Invalid input data"
        path: "/api/daily-records"